version: "3"
services:
  xbeach-preparation:
    image: deltares/xbeach-mi
    volumes:
      - ./:/data
    command: xbeach-mi-prepare config.json
  xbeach-orchestrator:
    image: deltares/xbeach-mi
    depends_on:
      - stat
      - instat
    volumes:
      - ./:/data
  stat:
    image: deltares/xbeach
    depends_on:
      - xbeach-preparation
    environment:
      - PORT=53606
    volumes:
      - .stat/:/data
    ports:
      - "53606:53606"
  instat:
    image: deltares/xbeach
    depends_on:
      - xbeach-preparation
    environment:
      - PORT=53609
    volumes:
      - .instat/:/data
    ports:
      - "53609:53609"
